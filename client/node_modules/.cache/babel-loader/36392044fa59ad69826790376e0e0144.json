{"ast":null,"code":"var _jsxFileName = \"/Users/maryannn28/Projects/PCH-Real-Estate/client/src/views/application/mail/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useDispatch } from 'react-redux'; // material-ui\n\nimport { styled, useTheme } from '@material-ui/styles';\nimport { Box, Grid, useMediaQuery } from '@material-ui/core'; // project imports\n\nimport MailDrawer from './MailDrawer';\nimport MailDetails from './MailDetails';\nimport MailList from './MailList';\nimport axios from 'utils/axios';\nimport { SET_MENU } from 'store/actions';\nimport { appDrawerWidth as drawerWidth, gridSpacing } from 'store/constant'; // drawer content element\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Main = styled('main', {\n  shouldForwardProp: prop => prop !== 'open'\n})(({\n  theme,\n  open\n}) => ({\n  width: 'calc(100% - 320px)',\n  flexGrow: 1,\n  paddingLeft: open ? theme.spacing(3) : 0,\n  transition: theme.transitions.create('margin', {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen\n  }),\n  marginLeft: `-${drawerWidth}px`,\n  [theme.breakpoints.down('lg')]: {\n    paddingLeft: 0,\n    marginLeft: 0\n  },\n  ...(open && {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginLeft: 0\n  })\n})); // ===========================|| MAIL MAIN PAGE ||=========================== //\n\nconst MailPage = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const theme = useTheme();\n  const matchDownSM = useMediaQuery(theme.breakpoints.down('lg'));\n  const [data, setData] = React.useState([]);\n  const [unreadCounts, setUnreadCounts] = React.useState({});\n\n  const getData = async () => {\n    const response = await axios.get('/api/mails/list');\n    setData(response.data.mails);\n    setUnreadCounts(response.data.unreadCount);\n  };\n\n  const [emailDetails, setEmailDetailsValue] = React.useState(false);\n  const [selectedMail, setSelectedMail] = React.useState(null);\n\n  const handleUserChange = async (event, dataRead) => {\n    if (dataRead) {\n      await axios.post('/api/mails/setRead', {\n        id: dataRead.id\n      });\n      await getData();\n    }\n\n    setSelectedMail(dataRead);\n    setEmailDetailsValue(prev => !prev);\n  };\n\n  const [openMailSidebar, setOpenMailSidebar] = React.useState(true);\n\n  const handleDrawerOpen = () => {\n    setOpenMailSidebar(prevState => !prevState);\n  };\n\n  React.useEffect(() => {\n    if (matchDownSM) {\n      setOpenMailSidebar(false);\n    } else {\n      setOpenMailSidebar(true);\n    }\n  }, [matchDownSM]);\n  React.useEffect(() => {\n    // hide left drawer when email app opens\n    dispatch({\n      type: SET_MENU,\n      opened: false\n    });\n    getData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const [filter, setFilter] = React.useState('all');\n\n  const handleFilter = async string => {\n    setEmailDetailsValue(false);\n    setFilter(string);\n    const response = await axios.post('/api/mails/filter', {\n      filter: string\n    });\n    setData(response.data);\n  };\n\n  const handleImportantChange = async (event, dataImportant) => {\n    if (dataImportant) {\n      await axios.post('/api/mails/setImportant', {\n        id: dataImportant.id\n      });\n      handleFilter(filter);\n    }\n  };\n\n  const handleStarredChange = async (event, dataStarred) => {\n    if (dataStarred) {\n      await axios.post('/api/mails/setStarred', {\n        id: dataStarred.id\n      });\n      handleFilter(filter);\n    }\n  }; // search email using name\n\n\n  const [search, setSearch] = React.useState('');\n\n  const handleSearch = event => {\n    const newString = event.target.value;\n    setSearch(newString);\n\n    if (newString) {\n      const newRows = data.filter(row => {\n        let matches = true;\n        const properties = ['name'];\n        let containsQuery = false;\n        properties.forEach(property => {\n          if (row.profile[property].toString().toLowerCase().includes(newString.toString().toLowerCase())) {\n            containsQuery = true;\n          }\n        });\n\n        if (!containsQuery) {\n          matches = false;\n        }\n\n        return matches;\n      });\n      setData(newRows);\n    } else {\n      handleFilter(filter);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(MailDrawer, {\n      openMailSidebar: openMailSidebar,\n      handleDrawerOpen: handleDrawerOpen,\n      filter: filter,\n      handleFilter: handleFilter,\n      unreadCounts: unreadCounts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Main, {\n      open: openMailSidebar,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: gridSpacing,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: emailDetails ? /*#__PURE__*/_jsxDEV(MailDetails, {\n            data: selectedMail,\n            handleUserDetails: handleUserChange,\n            handleImportantChange: handleImportantChange,\n            handleStarredChange: handleStarredChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(MailList, {\n            handleUserDetails: handleUserChange,\n            handleDrawerOpen: handleDrawerOpen,\n            handleImportantChange: handleImportantChange,\n            handleStarredChange: handleStarredChange,\n            data: data,\n            search: search,\n            handleSearch: handleSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MailPage, \"9g8rKMeOdJ405667Ii+90S+t+bc=\", false, function () {\n  return [useDispatch, useTheme, useMediaQuery];\n});\n\n_c = MailPage;\nexport default MailPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"MailPage\");","map":{"version":3,"sources":["/Users/maryannn28/Projects/PCH-Real-Estate/client/src/views/application/mail/index.js"],"names":["React","useDispatch","styled","useTheme","Box","Grid","useMediaQuery","MailDrawer","MailDetails","MailList","axios","SET_MENU","appDrawerWidth","drawerWidth","gridSpacing","Main","shouldForwardProp","prop","theme","open","width","flexGrow","paddingLeft","spacing","transition","transitions","create","easing","sharp","duration","leavingScreen","marginLeft","breakpoints","down","easeOut","enteringScreen","MailPage","dispatch","matchDownSM","data","setData","useState","unreadCounts","setUnreadCounts","getData","response","get","mails","unreadCount","emailDetails","setEmailDetailsValue","selectedMail","setSelectedMail","handleUserChange","event","dataRead","post","id","prev","openMailSidebar","setOpenMailSidebar","handleDrawerOpen","prevState","useEffect","type","opened","filter","setFilter","handleFilter","string","handleImportantChange","dataImportant","handleStarredChange","dataStarred","search","setSearch","handleSearch","newString","target","value","newRows","row","matches","properties","containsQuery","forEach","property","profile","toString","toLowerCase","includes","display"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// material-ui\r\nimport { styled, useTheme } from '@material-ui/styles';\r\nimport { Box, Grid, useMediaQuery } from '@material-ui/core';\r\n\r\n// project imports\r\nimport MailDrawer from './MailDrawer';\r\nimport MailDetails from './MailDetails';\r\nimport MailList from './MailList';\r\nimport axios from 'utils/axios';\r\nimport { SET_MENU } from 'store/actions';\r\nimport { appDrawerWidth as drawerWidth, gridSpacing } from 'store/constant';\r\n\r\n// drawer content element\r\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })(({ theme, open }) => ({\r\n    width: 'calc(100% - 320px)',\r\n    flexGrow: 1,\r\n    paddingLeft: open ? theme.spacing(3) : 0,\r\n    transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    marginLeft: `-${drawerWidth}px`,\r\n    [theme.breakpoints.down('lg')]: {\r\n        paddingLeft: 0,\r\n        marginLeft: 0\r\n    },\r\n    ...(open && {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        }),\r\n        marginLeft: 0\r\n    })\r\n}));\r\n\r\n// ===========================|| MAIL MAIN PAGE ||=========================== //\r\n\r\nconst MailPage = () => {\r\n    const dispatch = useDispatch();\r\n    const theme = useTheme();\r\n    const matchDownSM = useMediaQuery(theme.breakpoints.down('lg'));\r\n\r\n    const [data, setData] = React.useState([]);\r\n    const [unreadCounts, setUnreadCounts] = React.useState({});\r\n    const getData = async () => {\r\n        const response = await axios.get('/api/mails/list');\r\n        setData(response.data.mails);\r\n        setUnreadCounts(response.data.unreadCount);\r\n    };\r\n\r\n    const [emailDetails, setEmailDetailsValue] = React.useState(false);\r\n    const [selectedMail, setSelectedMail] = React.useState(null);\r\n    const handleUserChange = async (event, dataRead) => {\r\n        if (dataRead) {\r\n            await axios.post('/api/mails/setRead', { id: dataRead.id });\r\n            await getData();\r\n        }\r\n        setSelectedMail(dataRead);\r\n        setEmailDetailsValue((prev) => !prev);\r\n    };\r\n\r\n    const [openMailSidebar, setOpenMailSidebar] = React.useState(true);\r\n    const handleDrawerOpen = () => {\r\n        setOpenMailSidebar((prevState) => !prevState);\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        if (matchDownSM) {\r\n            setOpenMailSidebar(false);\r\n        } else {\r\n            setOpenMailSidebar(true);\r\n        }\r\n    }, [matchDownSM]);\r\n\r\n    React.useEffect(() => {\r\n        // hide left drawer when email app opens\r\n        dispatch({ type: SET_MENU, opened: false });\r\n        getData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const [filter, setFilter] = React.useState('all');\r\n    const handleFilter = async (string) => {\r\n        setEmailDetailsValue(false);\r\n        setFilter(string);\r\n        const response = await axios.post('/api/mails/filter', {\r\n            filter: string\r\n        });\r\n        setData(response.data);\r\n    };\r\n\r\n    const handleImportantChange = async (event, dataImportant) => {\r\n        if (dataImportant) {\r\n            await axios.post('/api/mails/setImportant', { id: dataImportant.id });\r\n            handleFilter(filter);\r\n        }\r\n    };\r\n\r\n    const handleStarredChange = async (event, dataStarred) => {\r\n        if (dataStarred) {\r\n            await axios.post('/api/mails/setStarred', { id: dataStarred.id });\r\n            handleFilter(filter);\r\n        }\r\n    };\r\n\r\n    // search email using name\r\n    const [search, setSearch] = React.useState('');\r\n    const handleSearch = (event) => {\r\n        const newString = event.target.value;\r\n        setSearch(newString);\r\n\r\n        if (newString) {\r\n            const newRows = data.filter((row) => {\r\n                let matches = true;\r\n\r\n                const properties = ['name'];\r\n                let containsQuery = false;\r\n\r\n                properties.forEach((property) => {\r\n                    if (row.profile[property].toString().toLowerCase().includes(newString.toString().toLowerCase())) {\r\n                        containsQuery = true;\r\n                    }\r\n                });\r\n\r\n                if (!containsQuery) {\r\n                    matches = false;\r\n                }\r\n                return matches;\r\n            });\r\n            setData(newRows);\r\n        } else {\r\n            handleFilter(filter);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Box sx={{ display: 'flex' }}>\r\n            <MailDrawer\r\n                openMailSidebar={openMailSidebar}\r\n                handleDrawerOpen={handleDrawerOpen}\r\n                filter={filter}\r\n                handleFilter={handleFilter}\r\n                unreadCounts={unreadCounts}\r\n            />\r\n            <Main open={openMailSidebar}>\r\n                <Grid container spacing={gridSpacing}>\r\n                    <Grid item xs={12}>\r\n                        {/* mail details & list */}\r\n                        {emailDetails ? (\r\n                            <MailDetails\r\n                                data={selectedMail}\r\n                                handleUserDetails={handleUserChange}\r\n                                handleImportantChange={handleImportantChange}\r\n                                handleStarredChange={handleStarredChange}\r\n                            />\r\n                        ) : (\r\n                            <MailList\r\n                                handleUserDetails={handleUserChange}\r\n                                handleDrawerOpen={handleDrawerOpen}\r\n                                handleImportantChange={handleImportantChange}\r\n                                handleStarredChange={handleStarredChange}\r\n                                data={data}\r\n                                search={search}\r\n                                handleSearch={handleSearch}\r\n                            />\r\n                        )}\r\n                    </Grid>\r\n                </Grid>\r\n            </Main>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default MailPage;\r\n"]},"metadata":{},"sourceType":"module"}