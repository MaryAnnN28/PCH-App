{"ast":null,"code":"var _jsxFileName = \"/Users/maryannn28/Projects/PCH-Real-Estate/client/src/views/application/e-commerce/Products/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux'; // material-ui\n\nimport { styled } from '@material-ui/styles';\nimport { useTheme } from '@material-ui/core/styles';\nimport { Box, Button, ButtonBase, Divider, Drawer, Grid, IconButton, InputAdornment, Menu, MenuItem, Stack, TextField, Typography, useMediaQuery } from '@material-ui/core'; // third party\n\nimport PerfectScrollbar from 'react-perfect-scrollbar'; // project imports\n\nimport ProductEmpty from './ProductEmpty';\nimport ProductFilter from './ProductFilter';\nimport ProductFilterView from './ProductFilterView';\nimport ProductCard from 'ui-component/cards/ProductCard';\nimport FloatingCart from 'ui-component/cards/FloatingCart';\nimport SkeletonProductPlaceholder from 'ui-component/cards/Skeleton/ProductPlaceholder';\nimport axios from 'utils/axios';\nimport SortOptions from './SortOptions';\nimport { SET_MENU, RESET_CART } from 'store/actions';\nimport { gridSpacing, appDrawerWidth } from 'store/constant'; // assets\n\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport FilterAltIcon from '@material-ui/icons/FilterAlt';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport SearchIcon from '@material-ui/icons/Search'; // product list container\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Main = styled('main', {\n  shouldForwardProp: prop => prop !== 'open'\n})(({\n  theme,\n  open\n}) => ({\n  flexGrow: 1,\n  transition: theme.transitions.create('margin', {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen\n  }),\n  marginRight: -appDrawerWidth,\n  [theme.breakpoints.down('lg')]: {\n    paddingRight: 0,\n    marginRight: 0\n  },\n  ...(open && {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginRight: 0\n  })\n})); // ===========================|| E-COMMERCE - PRODUCT GRID ||=========================== //\n\nconst Products = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const theme = useTheme();\n  const customization = useSelector(state => state.customization);\n  const cart = useSelector(state => state.cart);\n  const matchDownSM = useMediaQuery(theme.breakpoints.down('sm'));\n  const matchDownMD = useMediaQuery(theme.breakpoints.down('md'));\n  const matchDownLG = useMediaQuery(theme.breakpoints.down('lg')); // sort options\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const openSort = Boolean(anchorEl);\n\n  const handleClickListItem = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const [isLoading, setLoading] = React.useState(true);\n  React.useEffect(() => {\n    setLoading(false);\n  }, []); // drawer\n\n  const [open, setOpen] = React.useState(isLoading);\n\n  const handleDrawerOpen = () => {\n    setOpen(prevState => !prevState);\n  };\n\n  const [products, setProducts] = React.useState([]);\n\n  const getProducts = async () => {\n    const response = await axios.get('/api/products/list');\n    setProducts(response.data.products);\n  };\n\n  React.useEffect(() => {\n    getProducts(); // hide left drawer when email app opens\n\n    dispatch({\n      type: SET_MENU,\n      opened: false\n    }); // clear cart if complete order\n\n    if (cart.checkout.step > 2) {\n      dispatch({\n        type: RESET_CART\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []); // filter\n\n  const initialState = {\n    search: '',\n    sort: 'low',\n    gender: [],\n    categories: ['all'],\n    colors: [],\n    price: '',\n    rating: 0\n  };\n  const [filter, setFilter] = React.useState(initialState);\n\n  const filterIsEqual = (a1, a2) => a1 === a2 || a1.length === a2.length && a1.search === a2.search && a1.sort === a2.sort && a1.price === a2.price && a1.rating === a2.rating && JSON.stringify(a1.gender) === JSON.stringify(a2.gender) && JSON.stringify(a1.categories) === JSON.stringify(a2.categories) && JSON.stringify(a1.colors) === JSON.stringify(a2.colors);\n\n  const handelFilter = (type, params) => {\n    setLoading(true);\n\n    switch (type) {\n      case 'gender':\n        if (filter.gender.some(item => item === params)) {\n          setFilter({ ...filter,\n            gender: filter.gender.filter(item => item !== params)\n          });\n        } else {\n          setFilter({ ...filter,\n            gender: [...filter.gender, params]\n          });\n        }\n\n        break;\n\n      case 'categories':\n        if (filter.categories.some(item => item === params)) {\n          setFilter({ ...filter,\n            categories: filter.categories.filter(item => item !== params)\n          });\n        } else {\n          setFilter({ ...filter,\n            categories: [...filter.categories, params]\n          });\n\n          if (filter.categories.some(item => item === 'all') || params === 'all') {\n            setFilter({ ...filter,\n              categories: [params]\n            });\n          }\n        }\n\n        break;\n\n      case 'colors':\n        if (filter.colors.some(item => item === params)) {\n          setFilter({ ...filter,\n            colors: filter.colors.filter(item => item !== params)\n          });\n        } else {\n          setFilter({ ...filter,\n            colors: [...filter.colors, params]\n          });\n        }\n\n        break;\n\n      case 'price':\n        setFilter({ ...filter,\n          price: params\n        });\n        break;\n\n      case 'search':\n        setFilter({ ...filter,\n          search: params\n        });\n        break;\n\n      case 'sort':\n        setFilter({ ...filter,\n          sort: params\n        });\n        break;\n\n      case 'rating':\n        setFilter({ ...filter,\n          rating: params\n        });\n        break;\n\n      case 'reset':\n        setFilter(initialState);\n        break;\n\n      default: // no options\n\n    }\n  };\n\n  const filterData = async () => {\n    await axios.post('/api/products/filter', {\n      filter\n    }).then(res => {\n      setProducts(res.data.results);\n      setLoading(false);\n    });\n  };\n\n  React.useEffect(() => {\n    filterData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filter]);\n  React.useEffect(() => {\n    setOpen(!matchDownLG);\n  }, [matchDownLG]); // sort filter\n\n  const handleMenuItemClick = (event, index) => {\n    setFilter({ ...filter,\n      sort: index\n    });\n    setAnchorEl(null);\n  };\n\n  const sortLabel = SortOptions.filter(items => items.value === filter.sort); // search filter\n\n  const handleSearch = async event => {\n    const newString = event.target.value;\n    setFilter({ ...filter,\n      search: newString\n    });\n  };\n\n  let productResult = '';\n\n  if (products) {\n    productResult = products.map((product, index) => /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      sm: 6,\n      md: 4,\n      lg: 3,\n      children: /*#__PURE__*/_jsxDEV(ProductCard, {\n        id: product.id,\n        image: product.image,\n        name: product.name,\n        description: product.description,\n        offerPrice: product.offerPrice,\n        salePrice: product.salePrice,\n        rating: product.rating,\n        color: product.colors[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }, this));\n  }\n\n  const spacingMD = matchDownMD ? 1 : 1.5;\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    spacing: 2,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        spacing: matchDownMD ? 0.5 : 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Stack, {\n            direction: \"row\",\n            alignItems: \"center\",\n            spacing: 1,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h4\",\n              children: \"Shop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              children: /*#__PURE__*/_jsxDEV(ArrowForwardIosIcon, {\n                sx: {\n                  width: '0.875rem',\n                  height: '0.875rem',\n                  fontWeight: 500,\n                  color: 'grey.500'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Stack, {\n            direction: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            spacing: matchDownSM ? 0.5 : spacingMD,\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              sx: {\n                width: {\n                  xs: 140,\n                  md: 'auto'\n                }\n              },\n              InputProps: {\n                startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                  position: \"start\",\n                  children: /*#__PURE__*/_jsxDEV(SearchIcon, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 41\n                }, this)\n              },\n              value: filter.search,\n              placeholder: \"Search Product\",\n              size: \"small\",\n              onChange: handleSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                pl: 1.5,\n                fontSize: '1rem',\n                color: 'grey.500',\n                fontWeight: 400\n              },\n              children: \"|\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ButtonBase, {\n              disableRipple: true,\n              onClick: handleDrawerOpen,\n              children: [/*#__PURE__*/_jsxDEV(FilterAltIcon, {\n                sx: {\n                  fontWeight: 500,\n                  color: 'secondary.200'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                sx: {\n                  mt: 0.5,\n                  display: {\n                    xs: 'none',\n                    sm: 'block'\n                  }\n                },\n                children: \"Filter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                display: {\n                  xs: 'none',\n                  sm: 'flex'\n                },\n                fontSize: '1rem',\n                color: 'grey.500',\n                fontWeight: 400\n              },\n              children: \"|\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Stack, {\n              direction: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              sx: {\n                display: {\n                  xs: 'none',\n                  sm: 'flex'\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: \"Sort by: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                id: \"demo-positioned-button\",\n                \"aria-controls\": \"demo-positioned-menu\",\n                \"aria-haspopup\": \"true\",\n                \"aria-expanded\": openSort ? 'true' : undefined,\n                onClick: handleClickListItem,\n                sx: {\n                  color: 'grey.500',\n                  fontWeight: 400\n                },\n                endIcon: /*#__PURE__*/_jsxDEV(KeyboardArrowDownIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 46\n                }, this),\n                children: sortLabel.length > 0 && sortLabel[0].label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Menu, {\n                id: \"demo-positioned-menu\",\n                \"aria-labelledby\": \"demo-positioned-button\",\n                anchorEl: anchorEl,\n                open: openSort,\n                onClose: handleClose,\n                anchorOrigin: {\n                  vertical: 'bottom',\n                  horizontal: 'right'\n                },\n                transformOrigin: {\n                  vertical: 'top',\n                  horizontal: 'right'\n                },\n                children: SortOptions.map((option, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  sx: {\n                    p: 1.5\n                  },\n                  selected: option.value === filter.sort,\n                  onClick: event => handleMenuItemClick(event, option.value),\n                  children: option.label\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          borderColor: 'grey.400'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Main, {\n          open: open,\n          children: [/*#__PURE__*/_jsxDEV(ProductFilterView, {\n            filter: filter,\n            filterIsEqual: filterIsEqual,\n            handelFilter: handelFilter,\n            initialState: initialState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: gridSpacing,\n            children: [isLoading ? [1, 2, 3, 4, 5, 6, 7, 8].map(item => /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              md: 4,\n              lg: 3,\n              children: /*#__PURE__*/_jsxDEV(SkeletonProductPlaceholder, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 43\n              }, this)\n            }, item, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 39\n            }, this)) : productResult, products.length <= 0 && /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sx: {\n                mt: 3\n              },\n              children: /*#__PURE__*/_jsxDEV(ProductEmpty, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n          sx: {\n            ml: open ? 3 : 0,\n            height: matchDownLG ? '100vh' : 'auto',\n            flexShrink: 0,\n            zIndex: {\n              xs: 1200,\n              lg: open ? 0 : -1\n            },\n            overflowX: 'hidden',\n            width: appDrawerWidth,\n            '& .MuiDrawer-paper': {\n              height: 'auto',\n              width: appDrawerWidth,\n              position: matchDownLG ? 'fixed' : 'relative',\n              border: 'none',\n              borderRadius: matchDownLG ? 0 : `${customization.borderRadius}px`\n            }\n          },\n          variant: matchDownLG ? 'temporary' : 'persistent',\n          anchor: \"right\",\n          open: open,\n          ModalProps: {\n            keepMounted: true\n          },\n          onClose: handleDrawerOpen,\n          children: /*#__PURE__*/_jsxDEV(PerfectScrollbar, {\n            component: \"div\",\n            children: /*#__PURE__*/_jsxDEV(ProductFilter, {\n              filter: filter,\n              handelFilter: handelFilter\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FloatingCart, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Products, \"G+pvQp361iaUo0rS0+z6a0E2PtU=\", false, function () {\n  return [useDispatch, useTheme, useSelector, useSelector, useMediaQuery, useMediaQuery, useMediaQuery];\n});\n\n_c = Products;\nexport default Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["/Users/maryannn28/Projects/PCH-Real-Estate/client/src/views/application/e-commerce/Products/index.js"],"names":["React","useDispatch","useSelector","styled","useTheme","Box","Button","ButtonBase","Divider","Drawer","Grid","IconButton","InputAdornment","Menu","MenuItem","Stack","TextField","Typography","useMediaQuery","PerfectScrollbar","ProductEmpty","ProductFilter","ProductFilterView","ProductCard","FloatingCart","SkeletonProductPlaceholder","axios","SortOptions","SET_MENU","RESET_CART","gridSpacing","appDrawerWidth","ArrowForwardIosIcon","FilterAltIcon","KeyboardArrowDownIcon","SearchIcon","Main","shouldForwardProp","prop","theme","open","flexGrow","transition","transitions","create","easing","sharp","duration","leavingScreen","marginRight","breakpoints","down","paddingRight","easeOut","enteringScreen","Products","dispatch","customization","state","cart","matchDownSM","matchDownMD","matchDownLG","anchorEl","setAnchorEl","useState","openSort","Boolean","handleClickListItem","event","currentTarget","handleClose","isLoading","setLoading","useEffect","setOpen","handleDrawerOpen","prevState","products","setProducts","getProducts","response","get","data","type","opened","checkout","step","initialState","search","sort","gender","categories","colors","price","rating","filter","setFilter","filterIsEqual","a1","a2","length","JSON","stringify","handelFilter","params","some","item","filterData","post","then","res","results","handleMenuItemClick","index","sortLabel","items","value","handleSearch","newString","target","productResult","map","product","id","image","name","description","offerPrice","salePrice","spacingMD","width","height","fontWeight","color","xs","md","startAdornment","pl","fontSize","mt","display","sm","undefined","label","vertical","horizontal","option","p","borderColor","ml","flexShrink","zIndex","lg","overflowX","position","border","borderRadius","keepMounted"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// material-ui\r\nimport { styled } from '@material-ui/styles';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport {\r\n    Box,\r\n    Button,\r\n    ButtonBase,\r\n    Divider,\r\n    Drawer,\r\n    Grid,\r\n    IconButton,\r\n    InputAdornment,\r\n    Menu,\r\n    MenuItem,\r\n    Stack,\r\n    TextField,\r\n    Typography,\r\n    useMediaQuery\r\n} from '@material-ui/core';\r\n\r\n// third party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n\r\n// project imports\r\nimport ProductEmpty from './ProductEmpty';\r\nimport ProductFilter from './ProductFilter';\r\nimport ProductFilterView from './ProductFilterView';\r\nimport ProductCard from 'ui-component/cards/ProductCard';\r\nimport FloatingCart from 'ui-component/cards/FloatingCart';\r\nimport SkeletonProductPlaceholder from 'ui-component/cards/Skeleton/ProductPlaceholder';\r\nimport axios from 'utils/axios';\r\nimport SortOptions from './SortOptions';\r\nimport { SET_MENU, RESET_CART } from 'store/actions';\r\nimport { gridSpacing, appDrawerWidth } from 'store/constant';\r\n\r\n// assets\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport FilterAltIcon from '@material-ui/icons/FilterAlt';\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\n// product list container\r\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })(({ theme, open }) => ({\r\n    flexGrow: 1,\r\n    transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    marginRight: -appDrawerWidth,\r\n    [theme.breakpoints.down('lg')]: {\r\n        paddingRight: 0,\r\n        marginRight: 0\r\n    },\r\n    ...(open && {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        }),\r\n        marginRight: 0\r\n    })\r\n}));\r\n\r\n// ===========================|| E-COMMERCE - PRODUCT GRID ||=========================== //\r\n\r\nconst Products = () => {\r\n    const dispatch = useDispatch();\r\n    const theme = useTheme();\r\n    const customization = useSelector((state) => state.customization);\r\n    const cart = useSelector((state) => state.cart);\r\n\r\n    const matchDownSM = useMediaQuery(theme.breakpoints.down('sm'));\r\n    const matchDownMD = useMediaQuery(theme.breakpoints.down('md'));\r\n    const matchDownLG = useMediaQuery(theme.breakpoints.down('lg'));\r\n\r\n    // sort options\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const openSort = Boolean(anchorEl);\r\n    const handleClickListItem = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const [isLoading, setLoading] = React.useState(true);\r\n    React.useEffect(() => {\r\n        setLoading(false);\r\n    }, []);\r\n\r\n    // drawer\r\n    const [open, setOpen] = React.useState(isLoading);\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen((prevState) => !prevState);\r\n    };\r\n\r\n    const [products, setProducts] = React.useState([]);\r\n    const getProducts = async () => {\r\n        const response = await axios.get('/api/products/list');\r\n        setProducts(response.data.products);\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        getProducts();\r\n\r\n        // hide left drawer when email app opens\r\n        dispatch({ type: SET_MENU, opened: false });\r\n\r\n        // clear cart if complete order\r\n        if (cart.checkout.step > 2) {\r\n            dispatch({ type: RESET_CART });\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    // filter\r\n    const initialState = {\r\n        search: '',\r\n        sort: 'low',\r\n        gender: [],\r\n        categories: ['all'],\r\n        colors: [],\r\n        price: '',\r\n        rating: 0\r\n    };\r\n\r\n    const [filter, setFilter] = React.useState(initialState);\r\n\r\n    const filterIsEqual = (a1, a2) =>\r\n        a1 === a2 ||\r\n        (a1.length === a2.length &&\r\n            a1.search === a2.search &&\r\n            a1.sort === a2.sort &&\r\n            a1.price === a2.price &&\r\n            a1.rating === a2.rating &&\r\n            JSON.stringify(a1.gender) === JSON.stringify(a2.gender) &&\r\n            JSON.stringify(a1.categories) === JSON.stringify(a2.categories) &&\r\n            JSON.stringify(a1.colors) === JSON.stringify(a2.colors));\r\n\r\n    const handelFilter = (type, params) => {\r\n        setLoading(true);\r\n        switch (type) {\r\n            case 'gender':\r\n                if (filter.gender.some((item) => item === params)) {\r\n                    setFilter({ ...filter, gender: filter.gender.filter((item) => item !== params) });\r\n                } else {\r\n                    setFilter({ ...filter, gender: [...filter.gender, params] });\r\n                }\r\n                break;\r\n            case 'categories':\r\n                if (filter.categories.some((item) => item === params)) {\r\n                    setFilter({ ...filter, categories: filter.categories.filter((item) => item !== params) });\r\n                } else {\r\n                    setFilter({ ...filter, categories: [...filter.categories, params] });\r\n                    if (filter.categories.some((item) => item === 'all') || params === 'all') {\r\n                        setFilter({ ...filter, categories: [params] });\r\n                    }\r\n                }\r\n\r\n                break;\r\n            case 'colors':\r\n                if (filter.colors.some((item) => item === params)) {\r\n                    setFilter({ ...filter, colors: filter.colors.filter((item) => item !== params) });\r\n                } else {\r\n                    setFilter({ ...filter, colors: [...filter.colors, params] });\r\n                }\r\n                break;\r\n            case 'price':\r\n                setFilter({ ...filter, price: params });\r\n                break;\r\n            case 'search':\r\n                setFilter({ ...filter, search: params });\r\n                break;\r\n            case 'sort':\r\n                setFilter({ ...filter, sort: params });\r\n                break;\r\n            case 'rating':\r\n                setFilter({ ...filter, rating: params });\r\n                break;\r\n            case 'reset':\r\n                setFilter(initialState);\r\n                break;\r\n            default:\r\n            // no options\r\n        }\r\n    };\r\n\r\n    const filterData = async () => {\r\n        await axios\r\n            .post('/api/products/filter', {\r\n                filter\r\n            })\r\n            .then((res) => {\r\n                setProducts(res.data.results);\r\n                setLoading(false);\r\n            });\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        filterData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [filter]);\r\n\r\n    React.useEffect(() => {\r\n        setOpen(!matchDownLG);\r\n    }, [matchDownLG]);\r\n\r\n    // sort filter\r\n    const handleMenuItemClick = (event, index) => {\r\n        setFilter({ ...filter, sort: index });\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const sortLabel = SortOptions.filter((items) => items.value === filter.sort);\r\n\r\n    // search filter\r\n    const handleSearch = async (event) => {\r\n        const newString = event.target.value;\r\n        setFilter({ ...filter, search: newString });\r\n    };\r\n\r\n    let productResult = '';\r\n    if (products) {\r\n        productResult = products.map((product, index) => (\r\n            <Grid key={index} item xs={12} sm={6} md={4} lg={3}>\r\n                <ProductCard\r\n                    id={product.id}\r\n                    image={product.image}\r\n                    name={product.name}\r\n                    description={product.description}\r\n                    offerPrice={product.offerPrice}\r\n                    salePrice={product.salePrice}\r\n                    rating={product.rating}\r\n                    color={product.colors[0]}\r\n                />\r\n            </Grid>\r\n        ));\r\n    }\r\n\r\n    const spacingMD = matchDownMD ? 1 : 1.5;\r\n\r\n    return (\r\n        <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n                <Grid container alignItems=\"center\" justifyContent=\"space-between\" spacing={matchDownMD ? 0.5 : 2}>\r\n                    <Grid item>\r\n                        <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\r\n                            <Typography variant=\"h4\">Shop</Typography>\r\n                            <IconButton>\r\n                                <ArrowForwardIosIcon sx={{ width: '0.875rem', height: '0.875rem', fontWeight: 500, color: 'grey.500' }} />\r\n                            </IconButton>\r\n                        </Stack>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" spacing={matchDownSM ? 0.5 : spacingMD}>\r\n                            <TextField\r\n                                sx={{ width: { xs: 140, md: 'auto' } }}\r\n                                InputProps={{\r\n                                    startAdornment: (\r\n                                        <InputAdornment position=\"start\">\r\n                                            <SearchIcon fontSize=\"small\" />\r\n                                        </InputAdornment>\r\n                                    )\r\n                                }}\r\n                                value={filter.search}\r\n                                placeholder=\"Search Product\"\r\n                                size=\"small\"\r\n                                onChange={handleSearch}\r\n                            />\r\n                            <Typography sx={{ pl: 1.5, fontSize: '1rem', color: 'grey.500', fontWeight: 400 }}>|</Typography>\r\n\r\n                            <ButtonBase disableRipple onClick={handleDrawerOpen}>\r\n                                <FilterAltIcon sx={{ fontWeight: 500, color: 'secondary.200' }} />\r\n                                <Typography variant=\"h5\" sx={{ mt: 0.5, display: { xs: 'none', sm: 'block' } }}>\r\n                                    Filter\r\n                                </Typography>\r\n                            </ButtonBase>\r\n\r\n                            <Typography sx={{ display: { xs: 'none', sm: 'flex' }, fontSize: '1rem', color: 'grey.500', fontWeight: 400 }}>\r\n                                |\r\n                            </Typography>\r\n                            <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" sx={{ display: { xs: 'none', sm: 'flex' } }}>\r\n                                <Typography variant=\"h5\">Sort by: </Typography>\r\n                                <Button\r\n                                    id=\"demo-positioned-button\"\r\n                                    aria-controls=\"demo-positioned-menu\"\r\n                                    aria-haspopup=\"true\"\r\n                                    aria-expanded={openSort ? 'true' : undefined}\r\n                                    onClick={handleClickListItem}\r\n                                    sx={{ color: 'grey.500', fontWeight: 400 }}\r\n                                    endIcon={<KeyboardArrowDownIcon />}\r\n                                >\r\n                                    {sortLabel.length > 0 && sortLabel[0].label}\r\n                                </Button>\r\n                                <Menu\r\n                                    id=\"demo-positioned-menu\"\r\n                                    aria-labelledby=\"demo-positioned-button\"\r\n                                    anchorEl={anchorEl}\r\n                                    open={openSort}\r\n                                    onClose={handleClose}\r\n                                    anchorOrigin={{\r\n                                        vertical: 'bottom',\r\n                                        horizontal: 'right'\r\n                                    }}\r\n                                    transformOrigin={{\r\n                                        vertical: 'top',\r\n                                        horizontal: 'right'\r\n                                    }}\r\n                                >\r\n                                    {SortOptions.map((option, index) => (\r\n                                        <MenuItem\r\n                                            sx={{ p: 1.5 }}\r\n                                            key={index}\r\n                                            selected={option.value === filter.sort}\r\n                                            onClick={(event) => handleMenuItemClick(event, option.value)}\r\n                                        >\r\n                                            {option.label}\r\n                                        </MenuItem>\r\n                                    ))}\r\n                                </Menu>\r\n                            </Stack>\r\n                        </Stack>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <Divider sx={{ borderColor: 'grey.400' }} />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <Box sx={{ display: 'flex' }}>\r\n                    <Main open={open}>\r\n                        <ProductFilterView\r\n                            filter={filter}\r\n                            filterIsEqual={filterIsEqual}\r\n                            handelFilter={handelFilter}\r\n                            initialState={initialState}\r\n                        />\r\n                        <Grid container spacing={gridSpacing}>\r\n                            {isLoading\r\n                                ? [1, 2, 3, 4, 5, 6, 7, 8].map((item) => (\r\n                                      <Grid key={item} item xs={12} sm={6} md={4} lg={3}>\r\n                                          <SkeletonProductPlaceholder />\r\n                                      </Grid>\r\n                                  ))\r\n                                : productResult}\r\n\r\n                            {products.length <= 0 && (\r\n                                <Grid item xs={12} sx={{ mt: 3 }}>\r\n                                    <ProductEmpty />\r\n                                </Grid>\r\n                            )}\r\n                        </Grid>\r\n                    </Main>\r\n                    <Drawer\r\n                        sx={{\r\n                            ml: open ? 3 : 0,\r\n                            height: matchDownLG ? '100vh' : 'auto',\r\n                            flexShrink: 0,\r\n                            zIndex: { xs: 1200, lg: open ? 0 : -1 },\r\n                            overflowX: 'hidden',\r\n                            width: appDrawerWidth,\r\n                            '& .MuiDrawer-paper': {\r\n                                height: 'auto',\r\n                                width: appDrawerWidth,\r\n                                position: matchDownLG ? 'fixed' : 'relative',\r\n                                border: 'none',\r\n                                borderRadius: matchDownLG ? 0 : `${customization.borderRadius}px`\r\n                            }\r\n                        }}\r\n                        variant={matchDownLG ? 'temporary' : 'persistent'}\r\n                        anchor=\"right\"\r\n                        open={open}\r\n                        ModalProps={{ keepMounted: true }}\r\n                        onClose={handleDrawerOpen}\r\n                    >\r\n                        <PerfectScrollbar component=\"div\">\r\n                            <ProductFilter filter={filter} handelFilter={handelFilter} />\r\n                        </PerfectScrollbar>\r\n                    </Drawer>\r\n                </Box>\r\n            </Grid>\r\n            <FloatingCart />\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}